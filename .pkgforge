# Remove this as soon as you notice it
require 'digest'

name 'less'
org 'amylum'

licenses 'COPYING'

source(
  type: 'tar',
  url: 'http://www.greenwoodsoftware.com/less/less-487.tar.gz',
  checksum: 'fbca3df0a2d12912af79c2fb81852ad1b8dde4e452528fce5da9e9baf7c2a79d'
)

deps(
  ncurses: {
    version: '6.0-20171014-1',
    checksum: 'e1317eb9e21e36f2a05bd0442e3bc4069fc6a4bb6d95756c8f6c83100ed45e6c'
  }
)

configure_flags(
  prefix: '/usr',
  sbindir: '/usr/bin',
  sysconfdir: '/etc',
  'with-regex': 'pcre'
)

cflags
harden

build do
  configure "LDFLAGS" => "#{@forge.cflags.join(' ')}"
  make
  install
end

test do
  # TODO: add tests
end
